{% extends "base.html" %}

{% block content %}

<script type="text/javascript">
$.log = function(message){
     $('#log').append('<p>' + message + '</p>');
};

$(document).ready(function(){

			$.log = function(message){
				$('#log').append('<p>' + message + '</p>');
			};

{% comment %}   $('form.autosave#headerform').autosave({
      url: '/checklist/update/employeeinfo/{{ employee.id }}', 
      interval:       500,
    });{% endcomment %}
    $('form.autosave').autosave({
      interval: 500,
{% comment %}					setup: 		function(e,o) {
						$.log('jquery.autosave setup');
					},
					record: 	function(e,o) {
						$.log('jquery.autosave recording');
					},
					before: 	function(e,o) { 
						$.log('jquery.autosave before saving');
						return true; 
					},
					validate: 	function(e,o) {
						$.log('jquery.autosave checking validation');
						return $.isFunction($.fn.validate) && !$(this).is('.ignore-validate') ? $(this).valid() : true; 
					},
					save: 		function(e,o) {
						$.log('jquery.autosave saving');
					},
					shutdown: 	function(e,o) {
						$.log('jquery.autosave shutdown');
					},
					dirty: 		function(e,o) {
						$.log('jquery.autosave dirty');
					}
{% endcomment %}

    });
 
});

</script>

<h1>{{ employee.name }}</h1>

<form method="post" action="?" class="autosave" id="headerform">
<p>Start date: <input class="autosave" type="text" id="date" name="date" value="{{ employee.start_date|date:"Y-m-d" }}">. 
Confirmed: <input class="autosave" type="checkbox" id="confirmed" name="confirmed" {% if employee.confirmed %}checked="checked"{% endif %}>.
Archived: <input class="autosave" type="checkbox" id="archived" name="archived" {% if employee.archived %}checked="checked"{% endif %}>.
</p>
</form>

{% for listitem in listitems %}
<form method="post" action="/checklist/update/employeelist/{{ employee.id }}/{{ listitem.id }}" class="autosave" id="form_{{ listitem.id }}" name="form_{{ listitem.id }}">
<div class="dwrap">
<div class="dwrap_1"><input class="autosave" type="checkbox" name="checkbox" {% if listitem.value %}checked="checked"{%endif%} id="checkbox"></div>
<div class="dwrap_2"><small>{{ listitem.unit }}</small></div>
<div class="dwrap_3">{{ listitem.itemname }}</div>
<div class="dwrap_4">{% if listitem.textbox %}<input class="autosave" type="textbox" value="{{ listitem.textvalue }}" name="textbox" id="textbox">{% endif %}</div>
</div>
</form>
{% endfor %}

<div id="log">
Log
</div>
{% endblock %}
